<!DOCTYPE html>
<html>
  <head>
    <title>My Music Player</title>
    <style>
      body {
        background-color: #f5f5f5;
        font-family: sans-serif;
        margin: 0;
        padding: 0;
      }
      .music-player {
        max-width: 800px;
        margin: 50px auto;
        background-color: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        border-radius: 5px;
        overflow: hidden;
      }
      .music-player__cover {
        width: 100%;
        height: 0;
        padding-top: 100%;
        background-size: cover;
        background-position: center center;
        position: relative;
      }
      .music-player__cover::before {
        content: "";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: inherit;
        filter: blur(20px);
        z-index: -1;
      }
      .music-player__info {
        padding: 20px;
      }
      .music-player__title {
        font-size: 24px;
        margin: 0 0 10px;
      }
      .music-player__artist {
        font-size: 18px;
        margin: 0 0 20px;
      }
      .music-player__controls {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        background-color: #fff;
      }
      .music-player__button {
        display: block;
        width: 40px;
        height: 40px;
        border: none;
        background-color: transparent;
        cursor: pointer;
        outline: none;
      }
      .music-player__button svg {
        fill: #444;
        width: 20px;
        height: 20px;
      }
      .music-player__button--disabled svg {
        fill: #ccc;
      }
      .music-player__button--play svg {
        width: 25px;
        height: 25px;
      }
      .music-player__button--play svg path {
        fill: #444;
        stroke: #fff;
        stroke-width: 3;
      }
      .music-player__time {
        font-size: 12px;
        margin: 0 10px;
      }
      .music-player__time--total {
        text-align: right;
      }
      .music-player__slider {
        flex: 1;
        margin: 0 10px;
      }
      .music-player__slider input[type="range"] {
        width: 100%;
        height: 5px;
        -webkit-appearance: none;
        background-color: #ddd;
        outline: none;
        border-radius: 5px;
        cursor: pointer;
      }
      .music-player__slider input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background-color: #444;
        cursor: pointer;
      }
      .music-player__slider input[type="range"]::-moz-range-thumb {
        width: 16px;
        height: 16px;
        border-radius: 50%;
    background-color: #444;
    cursor: pointer;
  }
  .music-player__slider input[type="range"]::-ms-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: #444;
    cursor: pointer;
  }
  .music-player__controls--left {
    margin-right: auto;
  }
  .music-player__controls--right {
    margin-left: auto;
  }
</style>
</head>
<body>
  <div class="music-player">
    <div class="music-player__cover"></div>
    <div class="music-player__info">
      <div class="music-player__title"></div>
      <div class="music-player__artist"></div>
    </div>
    <div class="music-player__controls">
      <div class="music-player__controls--left">
        <button class="music-player__button music-player__button--shuffle" disabled>
          <svg viewBox="0 0 24 24"><path d="M15.94,7.67a2,2,0,1,1-2.94-2.67L12,3l-1.06,1a2,2,0,0,1-2.94-2.67L10,0,7.47,1.47A2,2,0,0,1,4.53,1.47L3,0,1.94,1.67A2,2,0,1,1,.06,4.33L2,3l1.06-1A2,2,0,0,1,6,1.67L8.53,0,11,1.47A2,2,0,0,1,13.94,1.47L15.47,3l1.06-1A2,2,0,1,1,15.94,7.67Z"/></svg>
        </button>
        <button class="music-player__button music-player__button--repeat" disabled>
          <svg viewBox="0 0 24 24"><path d="M20,14V7.79l-5.5,5.5-1.42-1.42L16.56,6.36,12,1.79,10.59,3.21,14.2,6.83,3,6.83v2ZM4,10v6.21l5.5-5.5,1.42,1.42L7.44,17.64l4.56,4.57,1.42-1.42L9,16.21V10Z"/></svg>
        </button>
      </div>
      <div class="music-player__controls--center">
        <button class="music-player__button music-player__button--previous" disabled>
          <svg viewBox="0 0 24 24"><path d="M10,4V9a4.92,4.92,0,0,1,3.3-1.29,5,5,0,1,1-5,5H4v2h4.3a5,5,0,0,1,0,8.58,4.91,4.91,0,0,1-3.3-1.29V22a1,1,0,0,1-2,0V2a1,1,0,0,1,2,0V7Z"/></svg>
        </button>
        <button class="music-player__button music-player__button--play-pause" disabled>
          <svg viewBox="0 0 24 24" class="music-player__play-icon"><path d="M3,22V2L20,12Z"/></svg>
          <svg viewBox="0 0 24 24" class="music-player__pause-icon"><path d="M6,19H9V5H6ZM15,5v14h3V5Z"/></svg>
        </button>
        <button class="music-player__button music-player__button--next" disabled>
          <svg viewBox="0 0 24 24"><path d="M10,4V9a4.92,4.92,0,0,1,3.3-1.29,5,5,0,1,1-5,5H4v2h4.3a5,5,0,0,1,0,8.58,4.91,4.91,0,0,1-3.3-1.29V22a1,1,0,0,1-2,0V2a1,1,0,0,1,2,0V7Z"/></svg>
        </button>
      </div>
      <div class="music-player__controls--right">
        <button class="music-player__button music-player__button--skip" disabled>
          <svg viewBox="0 0 24 24"><path d="M13,16V18.61L20.24,12,13,5.39V8H4v8Z"/></svg>
        </button>
        <button class="music-player__button music-player__button--return" disabled>
          <svg viewBox="0 0 24 24"><path d="M11,16V18.61L3.76,12,11,5.39V8h9V16Z"/></svg>
        </button>
      </div>
    </div>
    <div class="music-player__slider">
      <input type="range" min="0" max="100" value="0">
    </div>
  </div>
  </body>
  <script>

const audio = document.querySelector('audio');
const albumCover = document.querySelector('.music-player__album-cover');
const songTitle = document.querySelector('.music-player__song-title');
const songArtist = document.querySelector('.music-player__song-artist');
const playPauseButton = document.querySelector('.music-player__button--play-pause');
const skipButton = document.querySelector('.music-player__button--skip');
const returnButton = document.querySelector('.music-player__button--return');
const shuffleButton = document.querySelector('.music-player__button--shuffle');
const repeatButton = document.querySelector('.music-player__button--repeat');
const slider = document.querySelector('.music-player__slider input[type="range"]');

let currentSongIndex = 0;
let isShuffle = false;
let isRepeat = false;

const songs = [];

// fetch all songs from the "songs" folder
fetch('songs/')
  .then(response => response.text())
  .then(data => {
    const parser = new DOMParser();
    const html = parser.parseFromString(data, 'text/html');
    const links = Array.from(html.querySelectorAll('a'));

    links.forEach(link => {
      if (link.href.endsWith('.mp3')) {
        songs.push({
          src: link.href,
          title: '',
          artist: '',
          image: '',
          duration: 0
        });
      }
    });

    // load the first song
    loadSong(songs[currentSongIndex]);
  });

function loadSong(song) {
  audio.src = song.src;
  audio.addEventListener('loadedmetadata', () => {
    songTitle.textContent = audio.title || song.src.split('/').pop().split('.')[0];
    songArtist.textContent = audio.artist || 'Unknown Artist';
    albumCover.style.backgroundImage = `url('${audio.image || 'placeholder.jpg'}')`;
    slider.max = audio.duration;
    song.duration = audio.duration;
  });
}

function playSong() {
  audio.play();
  playPauseButton.innerHTML = '&#10074;&#10074;'; // pause icon
}

function pauseSong() {
  audio.pause();
  playPauseButton.innerHTML = '&#9658;'; // play icon
}

function skipSong() {
  currentSongIndex++;
  if (currentSongIndex >= songs.length) {
    currentSongIndex = 0;
  }
  loadSong(songs[currentSongIndex]);
  playSong();
}

function returnSong() {
  currentSongIndex--;
  if (currentSongIndex < 0) {
    currentSongIndex = songs.length - 1;
  }
  loadSong(songs[currentSongIndex]);
  playSong();
}

function shuffleSongs() {
  isShuffle = !isShuffle;
  shuffleButton.classList.toggle('active', isShuffle);
}

function repeatSong() {
  isRepeat = !isRepeat;
  repeatButton.classList.toggle('active', isRepeat);
}

// add event listeners for the audio element
audio.addEventListener('ended', () => {
  if (isRepeat) {
    loadSong(songs[currentSongIndex]);
    playSong();
  } else if (isShuffle) {
    currentSongIndex = Math.floor(Math.random() * songs.length);
    loadSong(songs[currentSongIndex]);
    playSong();
  } else {
    skipSong();
  }
});

audio.addEventListener('timeupdate', () => {
  slider.value = audio.currentTime;
});

// add event listeners for the controls
playPauseButton.addEventListener('click', () => {
  if (audio.paused) {
    playSong();
  } else {
    pauseSong();
  }
});

skipButton.addEventListener('click',skipSong);

returnButton.addEventListener('click', returnSong);

shuffleButton.addEventListener('click', shuffleSongs);

repeatButton.addEventListener('click', repeatSong);

slider.addEventListener('input', () => {
audio.currentTime = slider.value;
});


  </script>
  </html>

  
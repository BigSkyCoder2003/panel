<!DOCTYPE html>
<html>
  <head>
    <title>My Music Player</title>
  </head>
  <body>
    <h1>My Music Player</h1>
    <audio id="audio-player" controls>
      <source src="" type="audio/mpeg">
    </audio>
    <br>
    <button onclick="shuffle()">Shuffle</button>
    <button onclick="loop()">Loop</button>
    <script>
      var audioPlayer = document.getElementById("audio-player");
      var playlist = [];
      var currentSongIndex = 0;
      
      // function to get all music files from the "music" folder
      function getMusicFiles() {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'music/', true);
        xhr.onload = function () {
          var musicFiles = xhr.responseText.split('\n');
          for (var i = 0; i < musicFiles.length; i++) {
            if (musicFiles[i].endsWith(".mp3")) {
              playlist.push("music/" + musicFiles[i]);
            }
          }
          audioPlayer.src = playlist[currentSongIndex];
          audioPlayer.play();
        };
        xhr.send();
      }
      
      function shuffle() {
        playlist.sort(function() {
          return 0.5 - Math.random();
        });
        currentSongIndex = 0;
        audioPlayer.src = playlist[currentSongIndex];
        audioPlayer.play();
      }
      
      function loop() {
        audioPlayer.loop = !audioPlayer.loop;
      }
      
      audioPlayer.onended = function() {
        currentSongIndex++;
        if (currentSongIndex == playlist.length) {
          currentSongIndex = 0;
          shuffle();
        } else {
          audioPlayer.src = playlist[currentSongIndex];
          audioPlayer.play();
        }
      }
      
      getMusicFiles();
    </script>
  </body>
</html>
